# Module Chrome Reactive Kotlin

chrome-reactive-kotlin is a low level Chrome DevTools Protocol client written in Kotlin and leveraging RxJava3 for easy composability.

Library exposes all protocol domains in a single, cohesive and highly composable API. It supports both headless and non-headless Chrome automation capabilities.

Basic usage example:

```
val browser = Browser.builder().withAddress("127.0.0.1:9222").build()

browser.use { protocol ->
    protocol.target("about:blank").use { target ->
        await {
            target.Page.enable()
        }

        await {
            target.Page.navigate(NavigateRequest(url = "https://github.com/wendigo/chrome-reactive-kotlin")).flatMap { (frameId) ->
                protocol.Page.frameStoppedLoading().filter {
                    it.frameId == frameId
                }.take(1).singleOrError()
            }
        }
    }    
}
```

# Package pl.wendigo.chrome

Contains library main API ([Browser]) responsible for connecting to remote headless Chrome instance, creating and managing targets.


Browser object can be built using [Browser.Builder]:


```kotlin
val browser = Browser.builder()
    .withAddress("127.0.0.1:9222")
    .withBlankPage("about:blank")
    .withViewportWidth(1280)
    .withViewportHeight(1024)
    .withEventsBufferSize(128)
    .multiplexConnections(true)
    .incognito(true)
    .build()
```


Then [Target]s can be created using [Browser] API:


```kotlin
val target = browser.target(url = "https://google.com") // create new Target that will start loading google.com

// Target exposes all domains using lazy computed properties:

sync(target.Page.enable()) // enable Page domain events
```

# Package pl.wendigo.chrome.protocol

Contains DevTools protocol primitives and utility classes:

* [DebuggerFramesStream] represents stream of frames that are exchanged between protocol client and the browser over the WebSocket connection
* [RequestFrame] represents frame that is sent over the WebSocket connection
* [ResponseFrame] represents different frame types that are received over the WebSocket connection:
  * [ErrorResponseFrame] represents error frame that is received if the request is malformed and/or invalid
  * [RequestResponseFrame] represents response frame that is received when request was fulfilled successfully
  * [EventResponseFrame] represents event frame that is received when [Domain] event is generated
* [Event] is a parent class of all events that are generated by protocol
  * [RawEvent] represents an event that is parameterless

# Package pl.wendigo.chrome.targets

Targets management related classes ([Manager], [TargetSession])

# Package pl.wendigo.chrome.api

Contains auto-generated definitions of domains with methods, events, types. 

[ProtocolDomains] is a class that is used to retrieve protocol's domain objects.